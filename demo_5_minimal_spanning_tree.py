import mouette as M
import polyscope as ps
import numpy as np
import sys

ps.init()
ps.set_ground_plane_mode("none")
try:
    file_name = sys.argv[1]
    mesh = M.mesh.load(file_name)
except:
    V = np.array([
    [0.764662, 0.551939, 0.0064012],
    [0.321775, 0.269767, 0.254632 ],
    [0.333347, 0.837772, 0.0133873 ],
    [0.846417, 0.0532101, 0.0603482 ],
    [-0.043852, 0.351202, 0.111682 ],
    [0.253542, -0.150985, 0.308164 ],
    [-0.137281, -0.00582463, 0.285533], 
    [-0.0788323, 0.925889, -0.182443 ],
    [0.782672, -0.401346, 0.115146 ],
    [-0.387156, 0.32419, -0.0967164 ],
    [0.467428, -0.723307, 0.294023 ],
    [-0.0730801, -0.406515, 0.404089 ],
    [-0.446053, -0.0661832, -0.172151 ],
    [-0.317465, -0.338922, 0.0794523 ],
    [-0.407125, 0.714542, -0.494557 ],
    [-0.458362, 0.250473, -0.718943 ],
    [0.0676046, -0.907391, 0.296846 ],
    [-0.208977, -0.861157, -0.0437805 ],
    [-0.437676, -0.25364, -0.685058 ],
    [-0.354044, -0.691687, -0.481817 ]])

    F = np.array([
    [2, 3, 1 ],
    [1, 4, 2 ],
    [2, 5, 3 ],
    [4, 6, 2 ],
    [2, 7, 5 ],
    [6, 7, 2 ],
    [5, 8, 3 ],
    [4, 9, 6 ],
    [5, 10, 8 ],
    [7, 10, 5 ],
    [9, 11, 6 ],
    [6, 12, 7 ],
    [11, 12, 6 ],
    [7, 13, 10 ],
    [7, 14, 13 ],
    [12, 14, 7 ],
    [10, 15, 8 ],
    [13, 16, 10 ],
    [10, 16, 15 ],
    [11, 17, 12 ],
    [17, 18, 12 ],
    [12, 18, 14 ],
    [13, 19, 16 ],
    [13, 20, 19 ],
    [14, 20, 13 ],
    [18, 20, 14 ]])-1
    mesh = M.mesh.from_arrays(V,F=F)


tree = M.processing.trees.EdgeMinimalSpanningTree(mesh, starting_vertex=0)
tree.compute()
mst = tree.build_tree_as_polyline()

ps.register_surface_mesh("mesh", np.array(mesh.vertices), np.array(mesh.faces))
ps.register_curve_network("spanning tree", np.array(mst.vertices), np.array(mst.edges), color=[1,0,0])
ps.show()